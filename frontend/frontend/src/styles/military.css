@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

:root{
  /* Neutral gray theme */
  --mil-dark: #161819; /* replaced deep green */
  --mil-olive: #222526; /* repurposed as neutral surface */
  --mil-olive2: #1d1f20; /* base surface */
  --mil-sand: #e2e5e7; /* primary text */ 
  --mil-accent: #3d82f6; /* action / info */
  --mil-alert: #dc2626; /* alert */
  --mil-muted: #8b9297; /* secondary text */
  --mil-border: #2b2f31; /* borders */
  --mil-surface-alt: #1f2223; /* panels */
  --mil-surface-elev: #242728; /* elevated */
  --mil-desktop-sidebar: 320px;
  --mil-map-height-desktop: 560px;
  --mil-summary-height: 96px;
}

/* --- Base Layout Simplification --- */
body {
  font-family: "Share Tech Mono", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background: radial-gradient(circle at 25% 15%, #1f2223 0%, #161819 55%) fixed;
  color: var(--mil-sand);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
body::before, body::after { background:none; }

/* Topbar simplified */
.mil-topbar {
  background: var(--mil-surface-elev);
  border-bottom: 1px solid var(--mil-border);
  box-shadow: 0 2px 4px rgba(0,0,0,0.35);
  padding: 0.6rem 1rem;
  display:flex;
  align-items:center;
  gap:1rem;
  width:97vw;
}

/* small radar animation */
@keyframes radar-sweep {
  0% { transform: rotate(0deg) translateY(0); opacity: 0.9; }
  100% { transform: rotate(360deg) translateY(0); opacity: 0.15; }
}
.mil-radar {
  width:28px; height:28px; border-radius:50%;
  background: radial-gradient(circle at 30% 30%, rgba(197,154,69,0.12), transparent 40%);
  border: 1px solid rgba(197,154,69,0.08);
  box-shadow: 0 0 10px rgba(197,154,69,0.02) inset;
  position:relative;
  overflow:hidden;
}
.mil-radar::after {
  content:"";
  position:absolute; inset:0; border-radius:50%;
  background: conic-gradient(rgba(197,154,69,0.06), transparent 40%);
  animation: radar-sweep 3.5s linear infinite;
}

/* Panels flattened */
.mil-panel {
  background: var(--mil-surface-alt);
  border: 1px solid var(--mil-border);
  box-shadow: 0 4px 10px rgba(0,0,0,0.35);
}

/* Remove hover lift; keep subtle focus */
.mil-interactive:hover { box-shadow: 0 0 0 1px var(--mil-accent); transform:none; }

/* Buttons neutral */
.btn-mil {
  background: linear-gradient(180deg, var(--mil-surface-elev), var(--mil-surface-alt));
  border: 1px solid var(--mil-border);
  color: var(--mil-sand);
  font-weight:600;
  letter-spacing:.25px;
  padding: 0.45rem 0.85rem;
  border-radius: 6px;
  transition: transform .12s ease, box-shadow .12s ease;
}
.btn-mil:hover { background: var(--mil-surface-elev); }
.btn-mil:active { transform:none; background: #1b1d1e; }

/* Status dots recolored to theme */
.status-dot { width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:0.45rem; }
.status-ok { background:#15a34a; box-shadow:none; }
.status-warn { background:#d97706; }
.status-alert { background:#dc2626; }

/* blinking */
@keyframes blink { 0%,40%{opacity:1} 60%{opacity:0.12} 100%{opacity:1} }
.blink { animation: blink 1.6s linear infinite; }

/* scanline overlay */
.scanline {
  position:relative;
  overflow:hidden;
}
.scanline::after {
  content:"";
  position:absolute; left:-30%; top:0; width:60%; height:100%;
  background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  transform: skewX(-20deg);
  animation: scan 6s linear infinite;
  pointer-events:none;
  mix-blend-mode:overlay;
  opacity:0.03;
}

/* Table polishing */
.mil-table th { background: var(--mil-surface-elev); border-bottom:1px solid var(--mil-border); font-size:0.75rem; letter-spacing:.05em; }
.mil-table td { border-bottom:1px solid var(--mil-border); font-size:0.8rem; }
.mil-table tr:last-child td { border-bottom:none; }
.mil-table-wrap {
  max-height: 380px;
  overflow: auto;
  background: var(--mil-surface-alt);
}
.mil-table-wrap::-webkit-scrollbar { width:10px; }
.mil-table-wrap::-webkit-scrollbar-track { background: var(--mil-surface-alt); }
.mil-table-wrap::-webkit-scrollbar-thumb { background: #2f3335; border-radius:6px; }

/* utility small text */
.mil-muted { color: var(--mil-muted); font-size:0.85rem; }

/* Desktop-first container: center content and target 1920px wide workspace */
.mil-root {
  max-width: 100%;
  width: 100%;
  margin: 0 auto;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  font-size: 16px;
  padding: 0 0 2rem 0;
}

/* Make the main area a two-column layout: fixed sidebar + flexible main */
.mil-main {
  display: flex;
  gap: 1rem;
  align-items: stretch;
  flex: 1 1 auto;
}

/* Sidebar fixed width for desktop */
.mil-sidebar {
  width: var(--mil-desktop-sidebar);
  min-width: var(--mil-desktop-sidebar);
  padding: 1rem;
  box-sizing: border-box;
}

/* Main content fills rest */
.mil-content {
  flex: 1 1 auto;
  padding: 1rem;
  overflow: auto;
  max-width: 1920px;
  margin: 0 auto;
}

/* New 2x2 summary grid */
.summary-cards-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  grid-template-rows: repeat(2, minmax(0, 1fr));
  gap: 1rem;
}
.summary-card {
  height: 120px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  background: var(--mil-surface-alt);
  border:1px solid var(--mil-border);
  box-shadow: none;
}
@media (max-width: 960px) {
  .summary-cards-grid {
    grid-template-columns: 1fr;
    grid-template-rows: none;
  }
  .summary-card {
    height: auto;
  }
}

/* Remove old mil-summary-grid usage (kept for backward compatibility minimal height) */
.mil-summary-grid {
  display: none;
}

/* Map / feed large tile for desktop */
.mil-map-large {
  position: relative;
  height: var(--mil-map-height-desktop);
  width: 100%;
  border-radius: 6px;
  overflow: hidden;
  border: 1px solid rgba(63, 76, 90, 0.45);
  background: radial-gradient(circle at 28% 18%, rgba(32, 43, 54, 0.65), rgba(9, 13, 18, 0.95));
}

.mil-map-canvas {
  height: 100%;
  width: 100%;
  background: #0d1013;
  position: relative;
  z-index: 0;
}

.mil-map-tiles {
  filter: saturate(0.65) brightness(0.95) contrast(1.12);
}

.mil-map-empty {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.85rem;
  color: var(--mil-muted);
  background: radial-gradient(circle at 50% 50%, rgba(18, 24, 30, 0.92), rgba(8, 10, 14, 0.92));
  text-align: center;
}

.mil-nato-icon {
  background: transparent !important;
  border: none !important;
}

.mil-nato-marker {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  filter: drop-shadow(0 0 6px rgba(39, 130, 255, 0.35));
}

.mil-nato-marker__frame {
  width: 30px;
  height: 30px;
  border-radius: 6px;
  border: 2px solid currentColor;
  background: rgba(8, 12, 18, 0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-shadow: inset 0 0 10px rgba(34, 89, 160, 0.35);
}

.mil-nato-marker__frame::after {
  content: "";
  position: absolute;
  inset: 2px;
  border-radius: 4px;
  border: 1px solid rgba(124, 176, 255, 0.2);
  pointer-events: none;
}

.mil-nato-marker__glyph svg {
  width: 22px;
  height: 22px;
  display: block;
  color: inherit;
  fill: currentColor;
}

.mil-nato-marker--armor { color: #7ecbff; }
.mil-nato-marker--vehicle { color: #8ef2ff; }
.mil-nato-marker--infantry { color: #f0b8ff; }
.mil-nato-marker--artillery { color: #ffd27e; }
.mil-nato-marker--air { color: #9cfba8; }
.mil-nato-marker--unknown { color: #9ea6b8; }

.mil-nato-marker--tier-high .mil-nato-marker__frame {
  box-shadow: inset 0 0 12px rgba(64, 255, 164, 0.45), 0 0 12px rgba(64, 255, 164, 0.45);
}

.mil-nato-marker--tier-medium .mil-nato-marker__frame {
  box-shadow: inset 0 0 10px rgba(255, 200, 120, 0.4), 0 0 10px rgba(255, 200, 120, 0.4);
}

.mil-nato-marker--tier-low .mil-nato-marker__frame {
  box-shadow: inset 0 0 10px rgba(255, 128, 128, 0.4), 0 0 10px rgba(255, 128, 128, 0.4);
}

.mil-nato-marker--tier-unknown .mil-nato-marker__frame {
  box-shadow: inset 0 0 8px rgba(142, 156, 175, 0.35), 0 0 8px rgba(142, 156, 175, 0.35);
}

.leaflet-tooltip.mil-map-label {
  background: rgba(5, 8, 12, 0.92);
  color: #f0f0f0;
  border: 1px solid rgba(247, 255, 90, 0.4);
  border-radius: 4px;
  padding: 4px 8px;
  font-size: 0.75rem;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.45);
}

.leaflet-tooltip.mil-map-label--collapsed {
  padding: 0;
  background: rgba(7, 12, 18, 0.92);
  border: 1px solid rgba(73, 148, 255, 0.35);
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
}

.mil-map-tooltip {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.mil-map-tooltip__title {
  font-weight: 600;
  letter-spacing: 0.02em;
  color: #f8fbff;
}

.mil-map-tooltip__meta {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  font-size: 0.7rem;
  color: rgba(198, 212, 226, 0.85);
}

.mil-map-tooltip__mgrs {
  padding: 2px 6px;
  border-radius: 4px;
  background: rgba(21, 28, 37, 0.85);
  border: 1px solid rgba(73, 148, 255, 0.35);
  letter-spacing: 0.04em;
}

.mil-map-tooltip__type {
  display: inline-flex;
  align-items: center;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 600;
  font-size: 0.65rem;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  background: rgba(32, 44, 58, 0.8);
  border: 1px solid currentColor;
}

.mil-map-tooltip__type--armor { color: #7ecbff; }
.mil-map-tooltip__type--vehicle { color: #8ef2ff; }
.mil-map-tooltip__type--infantry { color: #f0b8ff; }
.mil-map-tooltip__type--artillery { color: #ffd27e; }
.mil-map-tooltip__type--air { color: #9cfba8; }
.mil-map-tooltip__type--unknown { color: #9ea6b8; }

.mil-map-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 999px;
  font-weight: 600;
  text-transform: uppercase;
  font-size: 0.65rem;
  letter-spacing: 0.05em;
}

.mil-map-badge--high {
  background: rgba(47, 214, 111, 0.2);
  color: #aef8c1;
  border: 1px solid rgba(47, 214, 111, 0.5);
}

.mil-map-badge--medium {
  background: rgba(255, 176, 59, 0.2);
  color: #ffd58f;
  border: 1px solid rgba(255, 176, 59, 0.55);
}

.mil-map-badge--low {
  background: rgba(232, 69, 69, 0.2);
  color: #ffb1b1;
  border: 1px solid rgba(232, 69, 69, 0.55);
}

.mil-map-badge--unknown {
  background: rgba(84, 98, 112, 0.2);
  color: rgba(207, 217, 227, 0.8);
  border: 1px solid rgba(84, 98, 112, 0.5);
}

.mil-map-tooltip-collapsed {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 10px;
  width: 100%;
  height: 100%;
  background: transparent;
  color: rgba(166, 202, 255, 0.9);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-size: 0.6rem;
  border: none;
  cursor: pointer;
  font-weight: 700;
}

.mil-map-tooltip-collapsed:hover {
  color: rgba(205, 223, 255, 0.95);
}

.mil-map-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(140deg, rgba(11, 17, 24, 0.2) 0%, rgba(11, 17, 24, 0.05) 45%, rgba(73, 148, 255, 0.08) 100%);
  mix-blend-mode: lighten;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 10;
}

.mil-map-large:hover .mil-map-overlay {
  opacity: 0.75;
}

.mil-map-intel {
  position: absolute;
  top: 12px;
  left: 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 220px;
  padding: 10px 12px;
  border-radius: 8px;
  background: rgba(9, 13, 18, 0.82);
  border: 1px solid rgba(73, 148, 255, 0.22);
  box-shadow: 0 10px 18px rgba(0, 0, 0, 0.4);
  pointer-events: none;
  z-index: 50;
}

.mil-map-intel__grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 6px 8px;
  font-size: 0.7rem;
}

.mil-map-intel__stat {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.mil-map-type-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 7px;
  border-radius: 999px;
  font-size: 0.58rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  background: rgba(17, 23, 31, 0.82);
  border: 1px solid rgba(88, 144, 210, 0.25);
  color: rgba(198, 212, 226, 0.8);
}

.mil-map-type-chip__icon {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: currentColor;
  display: inline-block;
}

.mil-map-type-chip__label {
  font-weight: 600;
}

.mil-map-type-chip__count {
  font-weight: 700;
}

.mil-map-type-chip--armor { color: #7ecbff; }
.mil-map-type-chip--vehicle { color: #8ef2ff; }
.mil-map-type-chip--infantry { color: #f0b8ff; }
.mil-map-type-chip--artillery { color: #ffd27e; }
.mil-map-type-chip--air { color: #9cfba8; }
.mil-map-type-chip--unknown { color: #9ea6b8; }

.mil-map-large .leaflet-pane,
.mil-map-large .leaflet-top,
.mil-map-large .leaflet-bottom {
  z-index: 5;
}

.mil-map-intel__label {
  display: block;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: rgba(173, 188, 204, 0.75);
  margin-bottom: 2px;
}

.mil-map-intel__value {
  font-size: 0.95rem;
  font-weight: 700;
  color: #f2f6ff;
  text-shadow: 0 0 8px rgba(73, 148, 255, 0.3);
}

.mil-map-intel__legend {
  grid-column: 1 / -1;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  font-size: 0.6rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: rgba(173, 188, 204, 0.7);
}

.mil-map-legend-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 2px 7px;
  border-radius: 999px;
  border: 1px solid transparent;
  font-weight: 600;
  background: rgba(17, 23, 31, 0.78);
}

.mil-map-legend-chip--high {
  border-color: rgba(47, 214, 111, 0.4);
  background: rgba(47, 214, 111, 0.15);
  color: rgba(185, 255, 205, 0.9);
}

.mil-map-legend-chip--medium {
  border-color: rgba(255, 176, 59, 0.4);
  background: rgba(255, 176, 59, 0.12);
  color: rgba(255, 214, 150, 0.9);
}

.mil-map-legend-chip--low {
  border-color: rgba(232, 69, 69, 0.4);
  background: rgba(232, 69, 69, 0.12);
  color: rgba(255, 170, 170, 0.9);
}

.mil-map-intel__types {
  grid-column: 1 / -1;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  max-height: 52px;
  overflow-y: auto;
  padding-right: 2px;
}

.mil-map-intel__types::-webkit-scrollbar {
  width: 6px;
}

.mil-map-intel__types::-webkit-scrollbar-thumb {
  background: rgba(88, 144, 210, 0.25);
  border-radius: 6px;
}

.mil-map-intel__signals {
  grid-column: 1 / -1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.mil-map-intel__signals-wrap {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.mil-map-intel__signal {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  border-radius: 6px;
  background: rgba(20, 28, 38, 0.78);
  border: 1px solid rgba(82, 138, 210, 0.2);
  color: rgba(214, 224, 236, 0.88);
  font-size: 0.65rem;
}

.mil-map-intel__signal-label {
  font-weight: 600;
  letter-spacing: 0.03em;
}

.mil-map-intel__signal-count {
  font-variant-numeric: tabular-nums;
  color: rgba(129, 180, 255, 0.88);
}

.leaflet-control-container .leaflet-control-zoom {
  border: 1px solid rgba(98, 122, 143, 0.4);
  border-radius: 6px;
  overflow: hidden;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.45);
}

.leaflet-control-container .leaflet-control-zoom a {
  background: linear-gradient(180deg, rgba(20, 28, 36, 0.92), rgba(12, 18, 25, 0.92));
  color: var(--mil-sand);
  border-bottom: 1px solid rgba(98, 122, 143, 0.3);
}

.leaflet-control-container .leaflet-control-zoom a:hover {
  background: linear-gradient(180deg, rgba(35, 46, 58, 0.92), rgba(20, 29, 38, 0.92));
}

.leaflet-bottom.leaflet-right .leaflet-control {
  margin: 0 0 8px 8px;
}

.leaflet-control-attribution {
  background: rgba(10, 14, 19, 0.85) !important;
  color: rgba(186, 200, 211, 0.75) !important;
  border-radius: 4px 0 0 0;
  font-size: 0.65rem;
  letter-spacing: 0.02em;
  border-top: 1px solid rgba(98, 122, 143, 0.28);
  border-left: 1px solid rgba(98, 122, 143, 0.28);
}

.leaflet-control-attribution a {
  color: rgba(130, 182, 255, 0.85) !important;
}

/* Alerts column aligned vertically */
.mil-alerts {
  display:flex;
  flex-direction:column;
  gap:0.75rem;
  background: var(--mil-surface-alt);
  border:1px solid var(--mil-border);
}

/* Slightly larger topbar font for desktop */
.mil-topbar .text-lg { 
  font-size: 1.05rem; }

/* Hover / focus adjustments for desktop pointer */
@media (hover: hover) and (pointer: fine) {
  .btn-mil:hover { background: var(--mil-surface-elev); }
}

/* Responsive fallback: on small screens revert to single column */
@media (max-width: 1023px) {
  .mil-root { padding: 0; }
  .mil-main { flex-direction: column; }
  .mil-sidebar { width: 100%; min-width: unset; }
  .mil-summary-grid { grid-template-columns: repeat(2, 1fr); }
  .mil-map-large { height: 320px; }
  .mil-table-wrap { max-height: 240px; background: var(--mil-surface-alt); }
}